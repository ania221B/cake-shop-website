import{r as c,j as e,B as R,u as F,a as B,b as L,C as H,p as W,d as E,x as K,y as M}from"./index-BBGMUsuM.js";import{B as Q}from"./Breadcrumb-C539vGRZ.js";import{P as G,a as Z}from"./ProductPricing-DmHdelOh.js";import{Q as q}from"./QuantityFormControl-DZsGKwzS.js";import{T as O}from"./index-CuiOsNOh.js";function V(){const[a,t]=c.useState(0),[p,n]=c.useState(""),[l,o]=c.useState(""),[h,u]=c.useState(!1),[x,b]=c.useState(!1),d=c.useRef(null);function j(i){const r=/^[a-zA-z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;return i===""?null:r.test(i)}function m(i){i.preventDefault(),u(!0),setTimeout(()=>{u(!1)},500);const r=j(p);o(r?"":r===null?"Please provide email address":"Provided email address is invalid"),l||(n(""),b(!0))}function g(i){const r=i.target.value;n(r);const y=j(r);o(y?"":y===null?"Please provide email address":"Provided email address is invalid")}return c.useEffect(()=>{if(d.current){const i=d.current.getBoundingClientRect().height;t(i)}}),x?e.jsxs("div",{className:"form-wrapper form-wrapper--restock-notification flow",style:{height:`${a}px`},children:[e.jsxs("header",{children:[e.jsx("h3",{children:"Notify on Restock:"}),e.jsx("p",{children:"If you'd like to be notified once the product is restocked, type your email below."})]}),e.jsxs("div",{className:`char-limit ${x?"form-fade-in":"form-fade-out"}`,children:[e.jsx("h4",{className:"fs-500 fw-700 clr-neutral-300",children:"Thanks for your email!"}),e.jsx("p",{children:"We'll notify you as soon as the product is available again."})]})]}):e.jsx("div",{ref:d,className:"form-wrapper form-wrapper--restock-notification",children:e.jsxs("form",{onSubmit:m,className:"form form--restock-notification",children:[e.jsxs("header",{children:[e.jsx("h3",{children:"Notify on Restock:"}),e.jsx("p",{children:"If you'd like to be notified once the product is restocked, type your email below."})]}),e.jsxs("div",{className:"form__control-wrapper",children:[e.jsx("label",{htmlFor:"email",className:"sr-only",children:"Email:"}),e.jsx("input",{id:"email",name:"email",value:p,type:"email",placeholder:"Email address",onChange:g}),l&&e.jsxs("div",{className:"form__error clr-primary-900 fw-700",children:[e.jsx(O,{}),e.jsx("p",{className:"fs-200",children:l})]})]}),h?e.jsx(R,{buttonText:"Subscribing...",ariaLabel:"Notify me about product restock",type:"submit",isLines:!0,isInactive:!0}):e.jsx(R,{buttonText:"Notify me",ariaLabel:"Notify me about product restock",type:"submit",isLines:!0})]})})}function I({images:a}){var h,u,x,b,d,j,m,g,i,r,y,P,_,C,k,v,N,w;const[t,p]=c.useState((a==null?void 0:a[0])||{}),n=c.useRef([]);function l(s){return s<0?a.length-1:s>a.length-1?0:s}function o(s,f){var S,D;if(s.key==="ArrowRight"){s.preventDefault();const z=l(f+1);(S=n.current[z])==null||S.focus()}if(s.key==="ArrowLeft"){s.preventDefault();const z=l(f-1);(D=n.current[z])==null||D.focus()}(s.key==="Enter"||s.key===" ")&&(s.preventDefault(),p(a[f]))}return e.jsxs("div",{className:"thumbnail-gallery",children:[e.jsx("div",{className:"thumbnail-gallery__preview",children:e.jsxs("picture",{children:[((u=(h=t==null?void 0:t.sizes)==null?void 0:h["1200"])==null?void 0:u.avif)&&e.jsx("source",{srcSet:t.sizes[1200].avif,type:"image/avif",media:"(min-width: 1200px)"}),((b=(x=t==null?void 0:t.sizes)==null?void 0:x["1200"])==null?void 0:b.webp)&&e.jsx("source",{srcSet:t.sizes[1200].webp,type:"image/webp",media:"(min-width: 1200px)"}),((j=(d=t==null?void 0:t.sizes)==null?void 0:d["768"])==null?void 0:j.avif)&&e.jsx("source",{srcSet:t.sizes[768].avif,type:"image/avif",media:"(min-width: 768px)"}),((g=(m=t==null?void 0:t.sizes)==null?void 0:m["768"])==null?void 0:g.webp)&&e.jsx("source",{srcSet:t.sizes[768].webp,type:"image/webp",media:"(min-width: 768px)"}),((r=(i=t==null?void 0:t.sizes)==null?void 0:i["400"])==null?void 0:r.avif)&&e.jsx("source",{srcSet:t.sizes[400].avif,type:"image/avif",media:"(max-width: 767px)"}),((P=(y=t==null?void 0:t.sizes)==null?void 0:y["400"])==null?void 0:P.webp)&&e.jsx("source",{srcSet:t.sizes[400].webp,type:"image/webp",media:"(max-width: 767px)"}),e.jsx("img",{src:(t==null?void 0:t.src)||((C=(_=t==null?void 0:t.sizes)==null?void 0:_.fallback)==null?void 0:C.jpg)||((v=(k=t.sizes)==null?void 0:k.fallback)==null?void 0:v.webp)||((w=(N=t.sizes)==null?void 0:N.fallback)==null?void 0:w.avif),alt:t.alt,title:t.title})]})}),e.jsx("ul",{className:"thumbnail-gallery__list",role:"list",children:a.map((s,f)=>{const{id:S,src:D,alt:z,title:$}=s,A=t.id===S;return e.jsx("li",{children:e.jsx("button",{tabIndex:0,ref:T=>n.current[f]=T,type:"button","aria-label":`View image ${f+1}`,onClick:()=>p(s),onKeyDown:T=>o(T,f),className:A?"btn btn--thumbnail selected":"btn btn--thumbnail",children:e.jsx("img",{src:D,alt:`${z} - image ${f+1}`,title:$,loading:"lazy"})})},S)})})]})}function te(){const{headerHeight:a,allProducts:t,addToCart:p,productMin:n,productMax:l}=F(),{productSlug:o}=B(),h=t.find(s=>s.name===L(o)),u=H(),{images:x,name:b,description:d,fullDescription:j,type:m,pricePerKg:g,regularPrice:i,lowestPrice30Days:r,currentPrice:y,rating:P,bestseller:_,newArrival:C,sale:k,availability:v}=h,[N,w]=c.useState(1);return e.jsx(e.Fragment,{children:e.jsx("section",{className:"section",style:{"--header-height":`${a}px`},children:e.jsxs("div",{className:"container",children:[e.jsx(Q,{items:[{label:"home",path:"/"},{label:"store",path:"/store"},{label:"all products",path:"/store/all-products"},{label:`${W(m)}`,path:`/store/all-products/${m}`},{label:`${b}`,path:null}]}),e.jsxs("article",{className:"product-item--single columns-one-one",children:[e.jsx(I,{images:x}),e.jsxs("div",{className:"product-item--single__body",children:[e.jsx(G,{variant:"single",name:b,description:d,rating:P,bestseller:_,newArrival:C,sale:k,type:m}),e.jsx(Z,{variant:"single",currentPrice:y,pricePerKg:g,regularPrice:i,lowestPrice30Days:r,sale:k}),e.jsxs("div",{className:"product-item--single__cart-controls cart-controls",children:[e.jsx(q,{quantity:N,onIncrease:()=>w(s=>E(s+1,n,l)),onDecrease:()=>w(s=>E(s-1,n,l)),onChange:s=>w(E(s,n,l)),isDisabled:!v}),v?e.jsx(R,{buttonText:"Add to cart",onClick:()=>p(h,N),isItemCard:!0}):e.jsx(R,{buttonText:"Will be back soon",isItemCard:!0,isInactive:!0})]}),e.jsxs("section",{className:"product-item--single__full-description",children:[e.jsx("h3",{children:"More info:"}),e.jsx("p",{children:j})]}),e.jsxs("dl",{className:"product-item--single__availability",children:[e.jsx("dt",{children:"Availability:"}),v?e.jsx("dd",{children:"In stock"}):e.jsxs("dd",{children:["Will be back soon. Estimated restock date:"," ",e.jsx("time",{dateTime:M(u),children:K(u,!0)})]})]}),!v&&e.jsx(V,{})]})]})]})})})}export{te as default};
